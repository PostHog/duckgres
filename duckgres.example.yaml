# Duckgres Configuration
# Copy this file to duckgres.yaml and customize as needed

# Server binding
host: "0.0.0.0"
port: 5432

# Directory for DuckDB database files (one per user)
data_dir: "./data"

# TLS configuration (required)
tls:
  cert: "./certs/server.crt"
  key: "./certs/server.key"

# User credentials (username: password)
users:
  postgres: "postgres"
  alice: "alice123"
  bob: "bob123"

# DuckDB extensions to load on database initialization
# Extensions are installed (downloaded if needed) and loaded automatically
# Common extensions: httpfs, parquet, json, sqlite, postgres, mysql, excel
# Default: ducklake (loaded even without config file)
extensions:
  - ducklake
  # - httpfs
  # - parquet

# DuckLake configuration (optional)
# When configured, DuckLake catalog is automatically attached on connection
# See: https://ducklake.select/docs/stable/duckdb/usage/connecting
ducklake:
  # Full connection string for the DuckLake metadata database
  # Examples:
  #   - "postgres:host=localhost user=ducklake password=secret dbname=ducklake"
  #   - "postgres:host=ducklake.example.com user=ducklake password=secret dbname=ducklake"
  # metadata_store: "postgres:host=localhost user=ducklake password=secret dbname=ducklake"

# Rate limiting configuration (optional - these are the defaults)
rate_limit:
  # Max failed auth attempts before banning an IP
  max_failed_attempts: 5
  # Time window for counting failed attempts (e.g., "5m", "1h")
  failed_attempt_window: "5m"
  # How long to ban an IP after too many failed attempts
  ban_duration: "15m"
  # Max concurrent connections from a single IP (0 = unlimited)
  max_connections_per_ip: 100
